<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <link href='https://fonts.googleapis.com/css?family=Chivo:900' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/pygment_trac.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <title>The Sherman Keyboard by oplS15projects</title>
  </head>

  <body>
    <div id="container">
      <div class="inner">

        <header>
          <h1>The Sherman Keyboard</h1>
          <h2>Synth Loaf</h2>
        </header>

        <section id="downloads" class="clearfix">
          <a href="https://github.com/oplS15projects/The-Sherman-Keyboard/zipball/master" id="download-zip" class="button"><span>Download .zip</span></a>
          <a href="https://github.com/oplS15projects/The-Sherman-Keyboard/tarball/master" id="download-tar-gz" class="button"><span>Download .tar.gz</span></a>
          <a href="https://github.com/oplS15projects/The-Sherman-Keyboard" id="view-on-github" class="button"><span>View on GitHub</span></a>
        </section>

        <hr>

        <section id="main_content">
          <h1>
<a id="the-sherman-keyboard" class="anchor" href="#the-sherman-keyboard" aria-hidden="true"><span class="octicon octicon-link"></span></a>The-Sherman-Keyboard</h1>

<h3>
<a id="website--the-sherman-keyboard" class="anchor" href="#website--the-sherman-keyboard" aria-hidden="true"><span class="octicon octicon-link"></span></a>Website : <a href="http://opls15projects.github.io/The-Sherman-Keyboard/">The Sherman Keyboard</a>
</h3>

<p><img src="https://raw.githubusercontent.com/oplS15projects/The-Sherman-Keyboard/master/screenshot.png"></p>

<h2>
<a id="authors" class="anchor" href="#authors" aria-hidden="true"><span class="octicon octicon-link"></span></a>Authors</h2>

<p><strong>Stuart Tomkins</strong></p>

<p><strong>Kevin Waco</strong></p>

<p><strong>Eamon Lightning</strong></p>

<h2>
<a id="overview" class="anchor" href="#overview" aria-hidden="true"><span class="octicon octicon-link"></span></a>Overview</h2>

<p>The emulation of instruments via audio signal processing is a challenging task and racket provides the tools for
generating and manipulating simple sine waves through several different libraries. The Sherman Keyboard is a synthesizer that gives the user the ability to program their own complex sounds by adjusting different settings built into the UI as well use pre-configured settings.</p>

<h2>
<a id="concepts-demonstrated" class="anchor" href="#concepts-demonstrated" aria-hidden="true"><span class="octicon octicon-link"></span></a>Concepts Demonstrated</h2>

<p><strong>Object Oriented Programming</strong>: Inheritance is used in creating the different elements of the GUI.</p>

<p><strong>Data Abstraction</strong>: Abstractions away from the core synth driver (additive-synth.rkt) by the effects processor allows for easy to generate complex sound waves through the GUI.</p>

<p><strong>Data mutability</strong> and <strong>local state</strong>: Used to store musical notes within hash tables in local frames to keep them persistent in memory.</p>

<h2>
<a id="external-technology-and-libraries" class="anchor" href="#external-technology-and-libraries" aria-hidden="true"><span class="octicon octicon-link"></span></a>External Technology and Libraries</h2>

<p><a href="http://pkg-build.racket-lang.org/doc/portaudio/index.html">portaudio</a>: Used to play stored audio data via the <strong>s16vec-play</strong> procedure. </p>

<p><a href="http://docs.racket-lang.org/foreign/homogeneous-vectors.html">ffi/vector</a>: Used to create sound samples by storing audio data into 16 bit integer arrays. <strong>make-s16vector</strong> is used to create the arrays and various provided procedures are used to fill and access their contents.</p>

<p><a href="http://docs.racket-lang.org/gui/index.html?q=racket%20gui">racket/gui</a>: Used to create the various elements of the GUI.</p>

<h2>
<a id="favorite-lines-of-code" class="anchor" href="#favorite-lines-of-code" aria-hidden="true"><span class="octicon octicon-link"></span></a>Favorite Lines of Code</h2>

<h4>
<a id="stu" class="anchor" href="#stu" aria-hidden="true"><span class="octicon octicon-link"></span></a>Stu:</h4>

<p>These lines of code are the event handling when the user left clicks a key. When the determine-note-on-click
procedure is called, it determines what key is pressed on the synth based on the pixel position of the mouse.</p>

<pre><code>    (define/override (on-event event)
      (when (send event button-down? 'left)
        (determine-note-on-click event)))
</code></pre>

<h4>
<a id="kevin" class="anchor" href="#kevin" aria-hidden="true"><span class="octicon octicon-link"></span></a>Kevin:</h4>

<p>This procedure uses the concepts of <strong>assignment</strong> and <strong>local state</strong> to initialize a hash table with musical tones. The procedure <em>create-note-hash</em> creates a computational object with time-varying state. When <em>create-note-hash</em> is execute a hash object, provided by racket, is created within a local frame within the global environment. The procedure init is defined and then a lambda procedure is returned. The lambda procedure has access to the the procedure <em>init</em> and also access to the hash table that was generated. The procedure <em>init</em> uses <strong>tail recursion</strong> to fill a hash table by using a list various musical tones. The user can then send <strong>symbolic data</strong> to execute specific operations on the note-hash created. This allows for <strong>abstraction</strong> away from how the notes in hash are created and played.</p>

<pre><code>(define (create-note-hash)
  (define note-hash (make-hash))
    (define (init freqs timbre attack max-volume num-of-harmonics decay-factor)
      (if (null? freqs)
        note-hash
        (begin
          (hash-set! note-hash (car freqs) (create-tone (car freqs)
                                                        timbre
                                                        attack
                                                        max-volume
                                                        num-of-harmonics
                                                        decay-factor))
          (init (cdr freqs) timbre
                            attack
                            max-volume
                            num-of-harmonics
                            decay-factor))))

  (lambda (cmd)
    (cond ((eq? cmd 'init) init)
          ((eq? cmd 'play) (lambda (pitch) (hash-ref note-hash pitch))))))
</code></pre>

<h4>
<a id="eamon" class="anchor" href="#eamon" aria-hidden="true"><span class="octicon octicon-link"></span></a>Eamon:</h4>

<p>This little snippet of code is the heart of the audio generation process. Individual sine waves with different frequencies, amplitudes, and phase offsets are generated and added to an audio vector. When the audio vector is played, these individual sine waves are played simultaneously creating the effect of additive synthesis. </p>

<pre><code>
  (define sample1 (real-&gt;s16 (* a1 a (sin (+ (* tpisr t (* fundamentalFreq k1)) phase1)))))
  (define sample2 (real-&gt;s16 (* a2 a (sin (+ (* tpisr t (* fundamentalFreq k2)) phase2)))))
  (define sample3 (real-&gt;s16 (* a3 a (sin (+ (* tpisr t (* fundamentalFreq k3)) phase3)))))
  (define sample4 (real-&gt;s16 (* a4 a (sin (+ (* tpisr t (* fundamentalFreq k4)) phase4)))))
  (s16vector-set! vec (* 4 t) sample1)
  (s16vector-set! vec (+ 1 (* 4 t)) sample2)
  (s16vector-set! vec (+ 2 (* 4 t)) sample3)
  (s16vector-set! vec (+ 3 (* 4 t)) sample4))

</code></pre>

<h1>
<a id="how-to-run" class="anchor" href="#how-to-run" aria-hidden="true"><span class="octicon octicon-link"></span></a>How to Run</h1>

<p>Install <a href="http://racket-lang.org/">Racket</a></p>

<p>Download .zip or .tar.gz file for this project from <a href="http://opls15projects.github.io/The-Sherman-Keyboard/">here</a>.</p>

<h4>
<a id="if-zip-was-downloaded" class="anchor" href="#if-zip-was-downloaded" aria-hidden="true"><span class="octicon octicon-link"></span></a>If .zip was downloaded:</h4>

<pre><code>unzip &lt;file-name&gt;.zip
</code></pre>

<h4>
<a id="if-targz-was-downloaded" class="anchor" href="#if-targz-was-downloaded" aria-hidden="true"><span class="octicon octicon-link"></span></a>If .tar.gz was downloaded:</h4>

<pre><code>tar -xvzf &lt;file-name&gt;.tar.gz
</code></pre>

<h4>
<a id="enter-the-newly-unpacked-directory" class="anchor" href="#enter-the-newly-unpacked-directory" aria-hidden="true"><span class="octicon octicon-link"></span></a>Enter the newly unpacked directory:</h4>

<pre><code>cd &lt;unpacked directory&gt;
</code></pre>

<h4>
<a id="load-mainrkt-with-drracket" class="anchor" href="#load-mainrkt-with-drracket" aria-hidden="true"><span class="octicon octicon-link"></span></a>Load main.rkt with drracket:</h4>

<pre><code>drracket main.rkt 
</code></pre>

<p>Once drracket has loaded, select run and the interactive GUI should load. drracket should install any dependencies needed by the project.</p>
        </section>

        <footer>
          The Sherman Keyboard is maintained by <a href="https://github.com/oplS15projects">oplS15projects</a><br>
          This page was generated by <a href="https://pages.github.com">GitHub Pages</a>. Tactile theme by <a href="https://twitter.com/jasonlong">Jason Long</a>.
        </footer>

        
      </div>
    </div>
  </body>
</html>